# Модуль Flask в Python
[Как установить Flask в Ubuntu](https://routerus.com/how-to-install-flask-on-ubuntu-18-04/)   

[Официальная документаци Flask](https://flask.palletsprojects.com/en/2.0.x/)

[wikibooks](https://ru.wikibooks.org/wiki/Flask)

[Веб фреймворк Flask в Python](https://docs-python.ru/packages/veb-frejmvork-flask-python/)

[Основы Flask](https://pythonru.com/uroki/3-osnovy-flask)



**Flask** - это фреймворк для создания веб-приложений на языке программирования Python.

#### Установка

Уствановка Flask: `pip install flask`. Проверить установку с помощью следующей команды, которая распечатает версию Flask: `python -m flask --version`

Начиная с версии Python 3.6, рекомендуемый способ создания виртуальной среды - использовать модуль venv. Что-бы уствновить пакет python3-venv, который предоставляет модуль venv необходимо выполнить команду: `sudo apt install python3-venv`

##### Зависимости

**Jinja2** — движок темплейтов
**Werkzeug** — набор инструментов WSGI, стандартного интерфейса Python для  развертывания веб-приложений и взаимодействия между ними и различными  серверами разработки.
**Virtualenv** — не является зависимостью. Это инструмент, который призван  решить проблему обратной совместимости. Вы можете использовать различные версии Python или версии библиотек, это может вызвать конфликт  зависимостей. Virtualenv решает эту проблему, создает изолированную  среду для каждого проекта.

#### Создание виртуальной среды

Создать новый каталог для своего приложения Flask и перейти в него. Оказавшись внутри каталога, необходимо выполнить команду, чтобы создать новую виртуальную среду:

```
$ python3 -m venv venv
```

Приведенная выше команда создает каталог с именем venv, который содержит копию двоичного venv Python, диспетчер пакетов Pip, стандартную библиотеку Python и другие вспомогательные файлы. Можно использовать любое имя для виртуальной среды.

Чтобы начать использовать виртуальную среду, необходимо активировать ее, запустив сценарий active: 

```
$ source venv/bin/activate
```

После активации появится имя виртуальной среды, которая в настоящее время используется. В данном случае venv.

#### Тестирование сервера разработки

Для запуска приложения используется команда flask, но перед этим необходимо указать Flask, как загружать приложение, указав переменную среды FLASK_APP:

```
(venv) $ export FLASK_APP=[имя_файла].py
(venv) $ flask run
```

Приведенная выше команда запустит встроенный сервер разработки.

Полученный url (может иметь вид: `http://127.0.0.1:5000`) в терминале, необходимо открыть в своем браузере.

Чтобы остановить сервер разработки, необходимо в терминале ввести `CTRL + C`.

##### Общедоступный сервер

Если запустить сервер, то он будет доступен только с вашего компьютера, а не с любого другого компьютера в сети. Это значение выставлено по умолчанию, потому что в режиме отладки пользователь приложения может выполнить произвольный код на вашем компьютере.

Если доверяете пользователям в вашей сети, можно сделать сервер общедоступным, просто изменив вызов run, который выглядит следующим образом:

```python
app.run(host='0.0.0.0')
# или
run --host=0.0.0.0 
```

Так же можно указать порт `port='5002'`

Это говорит вашей операционной системе слушать на всех ip (интерфейсах).

##### Режим отладки

Метод run хорош для начала разработки на лакальном сервере. Но это потребует ручного перезапуска сервера плсле каждлгл изменения в коде. Flask может справиться с этой проблеймой, если включить Debug Mode. Сервер будет сам перегружаться после каждого изменения в коде. А так же это полезный отладчик, на тот самый случай если что-то пойдет не так.

```python
app.debug = True
app.run()
# или
app.run(debug=True)
```

#### Деактивация виртуальной среды

Когда вы закончите свою работу, деактивируйте среду, набрав `deactivate` и вы вернетесь в свою обычную оболочку.

```
(venv) $ deactivate
```

#### Запуск сервера через приложение



## Основы Flask

`from flask import Flask` - класс Flask импортируется из пакета flask

##### Запуск сервера

```python
if __name__ == "__main__":
    app.run()
```

##### Режим отладки (Debug)

```python
if __name__ == "__main__":
    app.run(debug=True)
```

##### Создание route (путей)

```python
@app.route('/')
def index():
    # код
    return 'Hello World'
```

#### Пример

- [main_flask.py](https://github.com/AG-Sokolova/pythonCourse/blob/lecture/lesson_6/main_flask.py)
